# .github/workflows/trend.yml
name: Push Twittrend to LINE Group

on:
  repository_dispatch:
    types: [twittrend_request]   # ← これが “合言葉”
  workflow_dispatch:             # 手動実行も可

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '20' }
      - run: npm i playwright axios
      - run: npx playwright install --with-deps chromium
      - name: Run scraper
        run: node scrape.js
        env:
          LINE_CHANNEL_ACCESS_TOKEN: ${{ secrets.LINE_CHANNEL_ACCESS_TOKEN }}
          LINE_GROUP_ID: ${{ secrets.LINE_GROUP_ID }}
